# Loot-Core Package

This is the **core budget calculation engine** - the heart of Actual Budget.

## Critical Rules
⚠️ **This code runs on both client and server** - be extremely careful with dependencies and platform-specific code.

## Architecture
- Uses **CRDT** (Conflict-free Replicated Data Types) for budget calculations
- All budget math happens here - must be deterministic and accurate
- Pure functions wherever possible - easier to test and reason about

## Working with Budget Calculations
- Budget amounts are stored as **integers in cents** (not floats!)
- Example: $10.50 is stored as `1050`
- Always use `integerToCurrency()` and `currencyToInteger()` helper functions

## Testing
- Run tests: `yarn test`
- Budget calculation tests are in `src/server/budget/`
- Mock data available in `src/mocks/`

## Common Gotchas
- Floating point errors: Always work with integers
- Timezone issues: Use UTC for all date calculations
- Database schema: Changes require migrations in `migrations/`

## When to Ask for Review
- Any changes to budget calculation logic
- Database schema modifications
- New CRDT operations
